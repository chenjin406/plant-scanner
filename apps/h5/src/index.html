import { createRoot } from 'react-dom/client';
import Taro from '@tarojs/taro';
import { Provider } from 'react-redux';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { ReactReduxProvider } from '@tarojs/redux';
import App from './app';

if (process.env.TARO_ENV === 'h5') {
  const container = document.getElementById('app');
  const root = createRoot(container!);
  const queryClient = new QueryClient({
    defaultOptions: {
      queries: {
        retry: 1,
        refetchOnWindowFocus: false
      }
    }
  });

  root.render(
    <QueryClientProvider client={queryClient}>
      <ReactReduxProvider store={{}}>
        <App />
      </ReactReduxProvider>
    </QueryClientProvider>
  );
}
